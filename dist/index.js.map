{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["import {useEffect, useRef, useState} from \"react\";\r\n\r\nexport const useDocumentVisibility = () => {\r\n\r\n    const [visible, setVisible] = useState<boolean>(!document.hidden)\r\n    const [count, setCount] = useState<number>(0)\r\n\r\n    const subsribers = useRef<Array<(data: string)=>void>>([])\r\n\r\n    const visiblePage = () => {\r\n        if (document.hidden) {\r\n            subsribers.current.forEach(func => func('hidden'))\r\n            setCount(prevCount => prevCount + 1)\r\n        } else {\r\n            subsribers.current.forEach(func => func('visible'))\r\n        }\r\n        setVisible(document.visibilityState === \"visible\")\r\n    }\r\n\r\n    const onVisibilityChange = (callback: (data: string)=>void) => {\r\n        subsribers.current.push(callback);\r\n    }\r\n\r\n    useEffect(() => {\r\n        document.addEventListener('visibilitychange', visiblePage)\r\n        return () => { document.removeEventListener('visibilitychange', visiblePage) }\r\n    }, [])\r\n\r\n    return {onVisibilityChange, visible, count}\r\n}"],"names":["useDocumentVisibility","useState","document","hidden","visible","setVisible","count","setCount","subsribers","useRef","visiblePage","current","forEach","func","prevCount","visibilityState","onVisibilityChange","callback","push","useEffect","addEventListener","removeEventListener"],"mappings":";;;;AAEaA,IAAAA,qBAAqB,GAAG,SAAxBA,qBAAwB,GAAK;AAEtC,EAAA,IAAA,SAAA,GAA8BC,cAAQ,CAAU,CAACC,QAAQ,CAACC,MAApB,CAAtC;AAAA,MAAOC,OAAP,GAAA,SAAA,CAAA,CAAA,CAAA;AAAA,MAAgBC,UAAhB,GAAA,SAAA,CAAA,CAAA,CAAA,CAAA;;EACA,IAA0BJ,UAAAA,GAAAA,cAAQ,CAAS,CAAT,CAAlC;AAAA,MAAOK,KAAP,GAAA,UAAA,CAAA,CAAA,CAAA;AAAA,MAAcC,QAAd,GAAA,UAAA,CAAA,CAAA,CAAA,CAAA;;AAEA,EAAA,IAAMC,UAAU,GAAGC,YAAM,CAA8B,EAA9B,CAAzB,CAAA;;AAEA,EAAA,IAAMC,WAAW,GAAG,SAAdA,WAAc,GAAK;IACrB,IAAIR,QAAQ,CAACC,MAAb,EAAqB;AACjBK,MAAAA,UAAU,CAACG,OAAX,CAAmBC,OAAnB,CAA2B,UAAAC,IAAI,EAAA;QAAA,OAAIA,IAAI,CAAC,QAAD,CAAR,CAAA;OAA/B,CAAA,CAAA;MACAN,QAAQ,CAAC,UAAAO,SAAS,EAAA;QAAA,OAAIA,SAAS,GAAG,CAAhB,CAAA;AAAA,OAAV,CAAR,CAAA;AACH,KAHD,MAGO;AACHN,MAAAA,UAAU,CAACG,OAAX,CAAmBC,OAAnB,CAA2B,UAAAC,IAAI,EAAA;QAAA,OAAIA,IAAI,CAAC,SAAD,CAAR,CAAA;OAA/B,CAAA,CAAA;AACH,KAAA;;AACDR,IAAAA,UAAU,CAACH,QAAQ,CAACa,eAAT,KAA6B,SAA9B,CAAV,CAAA;GAPJ,CAAA;;AAUA,EAAA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,QAAD,EAAmC;AAC1DT,IAAAA,UAAU,CAACG,OAAX,CAAmBO,IAAnB,CAAwBD,QAAxB,CAAA,CAAA;GADJ,CAAA;;AAIAE,EAAAA,eAAS,CAAC,YAAK;AACXjB,IAAAA,QAAQ,CAACkB,gBAAT,CAA0B,kBAA1B,EAA8CV,WAA9C,CAAA,CAAA;AACA,IAAA,OAAO,YAAQ;AAAAR,MAAAA,QAAQ,CAACmB,mBAAT,CAA6B,kBAA7B,EAAiDX,WAAjD,CAAA,CAAA;KAAf,CAAA;GAFK,EAGN,EAHM,CAAT,CAAA;EAKA,OAAO;AAACM,IAAAA,kBAAkB,EAAlBA,kBAAD;AAAqBZ,IAAAA,OAAO,EAAPA,OAArB;AAA8BE,IAAAA,KAAK,EAALA,KAAAA;GAArC,CAAA;AACH;;;;"}