{"version":3,"file":"index.umd.js","sources":["../src/index.ts"],"sourcesContent":["import {useEffect, useRef, useState} from \"react\";\r\n\r\nexport const useDocumentVisibility = () => {\r\n\r\n    const [visible, setVisible] = useState(typeof document !== 'undefined' ? !document.hidden : true)\r\n    const [count, setCount] = useState(0)\r\n\r\n    const subsribers = useRef<Array<(data: boolean)=>void>>([])\r\n\r\n    const onVisibilityChange = (callback: (data: boolean)=>void) => {\r\n        subsribers.current.push(callback);\r\n    }\r\n\r\n    useEffect(() => {\r\n\r\n        const visiblePage = () => {\r\n            if (document.hidden) {\r\n                setCount(prevCount => prevCount + 1)\r\n            }\r\n            subsribers.current.forEach(func => func(!document.hidden))\r\n            setVisible(document.visibilityState === \"visible\")\r\n        }\r\n\r\n        document.addEventListener('visibilitychange', visiblePage)\r\n        return () => { document.removeEventListener('visibilitychange', visiblePage) }\r\n    }, [])\r\n\r\n    return {onVisibilityChange, visible, count}\r\n}"],"names":["useDocumentVisibility","useState","document","hidden","visible","setVisible","count","setCount","subsribers","useRef","onVisibilityChange","callback","current","push","useEffect","visiblePage","prevCount","forEach","func","visibilityState","addEventListener","removeEventListener"],"mappings":";;;;;;AAEaA,QAAAA,qBAAqB,GAAG,SAAxBA,qBAAwB,GAAK;IAEtC,EAAA,IAAA,SAAA,GAA8BC,cAAQ,CAAC,OAAOC,QAAP,KAAoB,WAApB,GAAkC,CAACA,QAAQ,CAACC,MAA5C,GAAqD,IAAtD,CAAtC;IAAA,MAAOC,OAAP,GAAA,SAAA,CAAA,CAAA,CAAA;IAAA,MAAgBC,UAAhB,GAAA,SAAA,CAAA,CAAA,CAAA,CAAA;;MACA,IAA0BJ,UAAAA,GAAAA,cAAQ,CAAC,CAAD,CAAlC;IAAA,MAAOK,KAAP,GAAA,UAAA,CAAA,CAAA,CAAA;IAAA,MAAcC,QAAd,GAAA,UAAA,CAAA,CAAA,CAAA,CAAA;;IAEA,EAAA,IAAMC,UAAU,GAAGC,YAAM,CAA+B,EAA/B,CAAzB,CAAA;;IAEA,EAAA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,QAAD,EAAoC;IAC3DH,IAAAA,UAAU,CAACI,OAAX,CAAmBC,IAAnB,CAAwBF,QAAxB,CAAA,CAAA;OADJ,CAAA;;IAIAG,EAAAA,eAAS,CAAC,YAAK;IAEX,IAAA,IAAMC,WAAW,GAAG,SAAdA,WAAc,GAAK;UACrB,IAAIb,QAAQ,CAACC,MAAb,EAAqB;YACjBI,QAAQ,CAAC,UAAAS,SAAS,EAAA;cAAA,OAAIA,SAAS,GAAG,CAAhB,CAAA;IAAA,SAAV,CAAR,CAAA;IACH,OAAA;;IACDR,MAAAA,UAAU,CAACI,OAAX,CAAmBK,OAAnB,CAA2B,UAAAC,IAAI,EAAA;IAAA,QAAA,OAAIA,IAAI,CAAC,CAAChB,QAAQ,CAACC,MAAX,CAAR,CAAA;WAA/B,CAAA,CAAA;IACAE,MAAAA,UAAU,CAACH,QAAQ,CAACiB,eAAT,KAA6B,SAA9B,CAAV,CAAA;SALJ,CAAA;;IAQAjB,IAAAA,QAAQ,CAACkB,gBAAT,CAA0B,kBAA1B,EAA8CL,WAA9C,CAAA,CAAA;IACA,IAAA,OAAO,YAAQ;IAAAb,MAAAA,QAAQ,CAACmB,mBAAT,CAA6B,kBAA7B,EAAiDN,WAAjD,CAAA,CAAA;SAAf,CAAA;OAXK,EAYN,EAZM,CAAT,CAAA;MAcA,OAAO;IAACL,IAAAA,kBAAkB,EAAlBA,kBAAD;IAAqBN,IAAAA,OAAO,EAAPA,OAArB;IAA8BE,IAAAA,KAAK,EAALA,KAAAA;OAArC,CAAA;IACH;;;;;;;;"}